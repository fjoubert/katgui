<!DOCTYPE html>
<html ng-app="katGui">
<head>
    <base href="/katgui/">
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <link rel="icon" type="image/png" href="images/favicon.ico" sizes="32x32">
    <link href="app/app.less" type="text/css" rel="stylesheet/less">
    <link href='https://fonts.googleapis.com/css?family=Sofia' rel='stylesheet'>
    <script data-remove="exclude">
        //backwards compatibility to allow for linking with the old #/ in the url
        // with html5 mode the angular hashbang is removed
        if (window.location.href.indexOf('#/') > -1) {
            var splitHref = window.location.href.split('#/');
            window.location.href = splitHref[0] + splitHref[1];
        }
    </script>
</head>

<body ng-controller="ApplicationCtrl as vm" md-theme="{{themePrimary}}" md-theme-watch="true" layout="row" ng-cloak>

<!-- Livereload script for development only (stripped during dist build) -->
<script src="http://localhost:35729/livereload.js" data-build="exclude"></script>
<script src="node_modules/jquery/dist/jquery.min.js"></script>

<!-- JS from node_modules -->
<script src="node_modules/less/dist/less.min.js" data-build="exclude"></script>
<script src="node_modules/bootstrap/dist/js/bootstrap.js"></script>
<script src="node_modules/underscore/underscore.js"></script>
<script src="node_modules/moment/moment.js"></script>
<script src="node_modules/sockjs-client/dist/sockjs.js"></script>
<script src="node_modules/angular/angular.js"></script>
<script src="node_modules/angular-messages/angular-messages.js"></script>
<script src="node_modules/angular-aria/angular-aria.js"></script>
<script src="node_modules/angular-animate/angular-animate.js"></script>
<script src="node_modules/hammerjs/hammer.js"></script>
<script src="node_modules/angular-material/angular-material.js"></script>
<script src="node_modules/angular-mocks/angular-mocks.js" data-build="exclude"></script>
<script src="node_modules/angular-ui-router/release/angular-ui-router.js"></script>
<script src="node_modules/angular-resource/angular-resource.js"></script>
<script src='node_modules/angular-right-click/src/ng-right-click.js'></script>
<script src="node_modules/angular-bootstrap/ui-bootstrap-tpls.js"></script>
<script src="node_modules/ngstorage/ngStorage.js"></script>
<script src="node_modules/angular-bootstrap-datetimepicker/src/js/datetimepicker.js"></script>
<script src="node_modules/angular-bootstrap-datetimepicker/src/js/datetimepicker.templates.js"></script>
<script src="node_modules/d3/d3.js"></script>
<script src="node_modules/jspdf/dist/jspdf.min.js"></script>
<script src="node_modules/jspdf-autotable/dist/jspdf.plugin.autotable.js"></script>
<script src="node_modules/crypto-js/core.js"></script>
<script src="node_modules/crypto-js/enc-base64.js"></script>
<script src="node_modules/crypto-js/sha256.js"></script>
<script src="node_modules/crypto-js/hmac.js"></script>
<script src="node_modules/crypto-js/hmac-sha256.js"></script>
<!-- Add node_modules JS Above -->

<!-- Main App JS -->
<script src="app/services/alarms-service.js"></script>
<script src="app/services/sound-service.js"></script>
<script src="app/services/control-service.js"></script>
<script src="app/services/config-service.js"></script>
<script src="app/services/data-service.js"></script>
<script src="app/services/monitor-service.js"></script>
<script src="app/services/notify-service.js"></script>
<script src="app/services/obs-sched-service.js"></script>
<script src="app/services/receptor-state-service.js"></script>
<script src="app/services/session-service.js"></script>
<script src="app/services/status-service.js"></script>
<script src="app/services/userlog-service.js"></script>
<script src="app/services/user-service.js"></script>

<script src="app/util/focus-directive.js"></script>
<script src="app/util/util.js"></script>

<script src="app/d3/compass-chart.js"></script>
<script src="app/d3/multi-line-chart.js"></script>
<script src="app/d3/multi-line-two-y-axis-chart.js"></script>
<script src="app/d3/d3-util-service.js"></script>
<script src="app/d3/receptor-pointing-polar.js"></script>
<script src="app/d3/receptor-pointing-horizontal.js"></script>
<script src="app/d3/receptor-health-items.js"></script>
<script src="app/d3/receptor-health-pack-map.js"></script>
<script src="app/d3/receptor-health-partition-map.js"></script>
<script src="app/d3/receptor-health-icicle-map.js"></script>
<script src="app/d3/receptor-health-sunburst-map.js"></script>
<script src="app/d3/status-single-level-tree-map.js"></script>
<script src="app/d3/timeline.js"></script>
<script src="app/d3/skarab-health-view.js"></script>

<script src="app/app.js"></script>
<script src="app/about/about.js"></script>
<script src="app/config/config.js"></script>
<script src="app/login-form/login-form.js"></script>
<script src="app/landing/landing.js"></script>
<script src="app/weather/weather.js"></script>
<script src="app/video/video.js"></script>
<script src="app/operator-control/operator-control.js"></script>
<script src="app/health/health.js"></script>
<script src="app/health/skarab-health/skarab-health.js"></script>
<script src="app/health/receptor-health/receptor-health.js"></script>
<script src="app/health/receptor-status/receptor-status.js"></script>
<script src="app/health/receptor-pointing/receptor-pointing.js"></script>
<script src="app/health/custom-health/custom-health.js"></script>
<script src="app/health/custom-health-view/custom-health-view.js"></script>
<script src="app/health/config-health-view/config-health-view.js"></script>
<script src="app/sensor-graph/sensor-graph.js"></script>
<script src="app/sensor-list/sensor-list.js"></script>
<script src="app/sensor-groups/sensor-groups.js"></script>
<script src="app/users/users.js"></script>
<script src="app/alarms/alarms.js"></script>
<script src="app/alarms/alarms-notify.js"></script>
<script src="app/widgets/apod/apod-widget.js"></script>
<script src="app/scheduler/scheduler-home.js"></script>
<script src="app/scheduler/schedule-block-drafts/schedule-block-drafts.js"></script>
<script src="app/scheduler/subarrays-draft-assignment/subarrays-draft-assignment.js"></script>
<script src="app/scheduler/subarray-resources/subarray-resources.js"></script>
<script src="app/scheduler/observations/observations-detail.js"></script>
<script src="app/scheduler/observations/observations-overview.js"></script>
<script src="app/scheduler/program-blocks/program-block-view.js"></script>
<script src="app/userlogs/userlogs.js"></script>
<script src="app/userlogs/userlog-tags.js"></script>
<script src="app/userlogs/userlog-reports.js"></script>
<script src="app/process-control/process-control.js"></script>
<script src="app/cam-components/cam-components.js"></script>
<script src="app/device-status/device-status.js"></script>
<script src="app/gui-links/gui-links.js"></script>
<script src="app/instrumental-config/instrumental-config.js"></script>
<script src="app/reports/utilisation-report.js"></script>
<!-- Add New Component JS Above -->

<!--dont use md-whiteframe class because it leaves black artifacts on sidenav-->
<md-content layout="row" layout-fill>
    <md-sidenav md-theme="{{themeSecondary}}" ng-if="$root.loggedIn" class="md-sidenav-left" md-component-id="left-sidenav" layout="column" style="box-shadow: 0 8px 17px 1px rgba(0, 0, 0, 0.2);">
        <md-toolbar class="md-whiteframe-z1" md-theme-watch="true">
            <h1 class="md-toolbar-tools side-nav-title">katGUI</h1>
        </md-toolbar>
        <md-content class="md-content-padding">
            <md-list>
                <md-item>
                    <md-item-content class="menu-item" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('home')">
                        <md-button><span class="fa fa-home fa-camera-retro"></span><span>Disable Alarms</span></md-button>
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content class="menu-item" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('home')">
                        <md-button><span class="fa fa-home"></span><span>Home</span></md-button>
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content class="menu-item" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('alarms')">
                        <md-button><span class="fa fa-warning"></span><span>Alarms</span></md-button>
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content class="menu-item" style="border-bottom: 1px solid #e5e5e5;" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('operator-control')">
                        <div class="menu-item" layout="row" layout-align="start center">
                            <md-button><span class="fa fa-cogs"></span><span>Operator Control</span></md-button>
                        </div>
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content style="margin-top: 8px; margin-bottom: 8px; padding-bottom: 8px; border-bottom: 1px solid #e5e5e5;" layout="column">
                        <div class="menu-item" layout="row" layout-align="start center">
                            <md-button><span class="fa fa-heart"></span><span>Health Views</span></md-button>
                        </div>

                        <div class="menu-item menu-item-indented" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('health')">
                            <md-button><span class="fa fa-heart"></span><span>Top Health</span></md-button>
                        </div>

                        <div class="menu-item menu-item-indented" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('skarabHealth')">
                            <md-button><span class="fa fa-futbol-o"></span><span>SKARAB Health</span></md-button>
                        </div>

                        <div ng-repeat="healthView in $root.receptorHealthViews | orderBy track by $index" class="menu-item menu-item-indented" layout="row" layout-align="start center">
                            <md-button ng-click="vm.sideNavStateGo('receptorHealth', {healthView: healthView})"><span class="fa fa-th-large"></span> <span>{{healthView.toUpperCase()}} HEALTH</span></md-button>
                        </div>
                        <div class="menu-item" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('receptorStatus')">
                            <md-button><span class="fa fa-th"></span><span>Receptor Status</span></md-button>
                        </div>
                        <div class="menu-item" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('receptorPointing')">
                            <md-button><span class="fa fa-crosshairs"></span><span>Receptor Pointing</span></md-button>
                        </div>
                        <div class="menu-item" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('device-status')">
                            <md-button><span class="fa fa-th-list"></span><span>Device Status</span></md-button>
                        </div>
                </md-item>
                <md-item>
                    <md-item-content style="margin-top: 8px; margin-bottom: 8px; padding-bottom: 8px; border-bottom: 1px solid #e5e5e5;" layout="column">
                        <div class="menu-item" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('customHealth')">
                            <md-button><span class="fa fa-heartbeat"></span><span>Custom Health</span></md-button>
                        </div>
                        <div ng-repeat="configItem in $root.customHealthViews | orderBy track by $index" class="menu-item menu-item-indented" layout="row" layout-align="start center">
                            <md-button ng-click="vm.sideNavStateGo('customHealthView', {layout: configItem})"><span class="fa fa-file-code-o"></span> <span>{{configItem.toUpperCase()}}</span></md-button>
                        </div>
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content style="margin-top: 8px; margin-bottom: 8px; padding-bottom: 8px; border-bottom: 1px solid #e5e5e5;" layout="column">
                        <div class="menu-item" layout="row" layout-align="start center" >
                            <md-button><span class="fa fa-heart"></span><span>Config Health</span></md-button>
                        </div>
                        <div ng-repeat="configItem in $root.configHealthViews | orderBy track by $index" class="menu-item menu-item-indented" layout="row" layout-align="start center">
                            <md-button ng-click="vm.sideNavStateGo('config-health-view', {configItem: configItem})"><span class="fa fa-file-code-o"></span> <span>{{configItem.toUpperCase()}}</span></md-button>
                        </div>
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content style="padding-bottom: 8px" ng-click="vm.sideNavStateGo('cam-components')">
                        <div class="menu-item" layout="row" layout-align="start center">
                            <md-button><span class="fa fa-cubes"></span><span>CAM Components</span></md-button>
                        </div>
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content style="padding-bottom: 8px" ng-click="vm.sideNavStateGo('process-control')">
                        <div class="menu-item" layout="row" layout-align="start center">
                            <md-button><span class="fa fa-wrench"></span><span>Process Control</span></md-button>
                        </div>
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content style="border-bottom: 1px solid #e5e5e5" class="menu-item" layout="row" layout-align="start center" ng-click="$root.openCentralLogger()">
                        <md-button><span class="fa fa-file-text-o"></span><span>Central Logs</span></md-button>
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content layout="column" style="margin-top: 8px; margin-bottom: 8px; padding-bottom: 8px; border-bottom: 1px solid #e5e5e5;">
                        <div class="menu-item" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('scheduler')">
                            <md-button><span class="fa fa-list"></span><span>Subarrays Workflow</span></md-button>
                        </div>
                        <div class="menu-item menu-item-indented" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('scheduler.drafts')">
                            <md-button><span class="fa fa-pencil"></span><span>Schedule Block Approved</span></md-button>
                        </div>
                        <div class="menu-item menu-item-indented" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('scheduler.program-blocks')">
                            <md-button><span class="fa fa-pencil"></span><span>Program Blocks</span></md-button>
                        </div>
                        <div class="menu-item menu-item-indented" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('scheduler.subarrays')">
                            <md-button><span class="fa fa-asterisk"></span><span>Subarray Schedule Blocks</span></md-button>
                        </div>
                        <div class="menu-item menu-item-indented" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('scheduler.resources')">
                            <md-button><span class="fa fa-sitemap"></span><span>Set-up Subarray</span></md-button>
                        </div>
                        <div class="menu-item menu-item-indented" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('scheduler.observations')">
                            <md-button><span class="fa fa-binoculars"></span><span>Observations Overview</span></md-button>
                        </div>
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content class="menu-item" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('sensor-graph')">
                        <md-button><span class="fa fa-line-chart"></span><span>Sensor Graph</span></md-button>
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content class="menu-item" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('sensor-list')">
                        <md-button><span class="fa fa-th-list"></span><span>Sensor List</span></md-button>
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content class="menu-item" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('sensor-groups')">
                        <md-button><span class="fa fa-list-alt"></span><span>Sensor Groups</span></md-button>
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content class="menu-item" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('gui-links')"
                                     style="border-bottom: 1px solid #e5e5e5;">
                        <md-button><span class="fa fa-list-alt"></span><span>GUI Links</span></md-button>
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content class="menu-item" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('instrumental-config')"
                                     style="border-bottom: 1px solid #e5e5e5;">
                        <md-button><span class="fa fa-question-circle"></span><span>Instrumental Config</span></md-button>
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content class="menu-item" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('userlogs')">
                        <md-button><span class="fa fa-pencil-square-o"></span><span>User Logs</span></md-button>
                    </md-item-content>
                </md-item>
                <md-item ng-show="$root.expertOrLO">
                    <md-item-content class="menu-item" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('userlog-tags')">
                        <md-button><span class="fa fa-tag"></span><span>User Log Tags</span></md-button>
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content class="menu-item" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('userlogs-report')">
                        <md-button><span class="fa fa-file-pdf-o"></span><span>User Log Reports</span></md-button>
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content ng-show="$root.showVideoLinks" class="menu-item" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('video')">
                        <md-button><span class="fa fa-video-camera"></span><span>Video</span></md-button>
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content class="menu-item-divider" layout="row" layout-align="start center">
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content class="menu-item" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('utilisation-report')">
                        <md-button><span class="fa fa-file-pdf-o"></span><span>Utilisation Report</span></md-button>
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content class="menu-item-divider" layout="row" layout-align="start center">
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content style="border-bottom: 1px solid #e5e5e5;" class="menu-item" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('weather')">
                        <md-button><span class="fa fa-cloud"></span><span>Weather</span></md-button>
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content class="menu-item" layout="row" layout-align="start center" ng-click="$root.openGangliaLink()">
                        <md-button><span class="fa fa-area-chart"></span><span>Cluster Monitoring (Ganglia)</span></md-button>
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content class="menu-item" layout="row" layout-align="start center" ng-click="$root.openUrlInNewTab('https://drive.google.com/drive/folders/0B8fhAW5QnZQWVkdXYm1GTnZ2X1k')">
                        <md-button><span class="fa fa-google"></span><span>CAM Documentation</span></md-button>
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content class="menu-item" layout="row" layout-align="start center" ng-click="$root.openIRCDisplay($event)">
                        <md-button><span class="fa"></span><span>#IRC</span></md-button>
                    </md-item-content>
                </md-item>
            </md-list>
        </md-content>
    </md-sidenav>

    <md-sidenav md-theme="{{themeSecondary}}" ng-if="$root.loggedIn" class="md-sidenav-right" md-component-id="right-sidenav" layout="column" style="box-shadow: 0 8px 17px 1px rgba(0, 0, 0, 0.2);">
        <md-toolbar class="md-whiteframe-z1" md-theme-watch="true">
            <h1 class="md-toolbar-tools side-nav-title">User Navigation</h1>
        </md-toolbar>
        <md-content class="md-content-padding">
            <md-list>
                <md-item>
                    <md-item-content class="menu-item" layout="row" layout-align="start center" ng-click="vm.sideNavRightStateGo('users')">
                        <md-button><span class="fa fa-users"></span><span>User Admin</span></md-button>
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content class="menu-item" layout="row" layout-align="start center" ng-click="vm.sideNavRightStateGo('config')">
                        <md-button><span class="fa fa-gear"></span><span>Configure katGUI</span></md-button>
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content class="menu-item" layout="row" layout-align="start center" ng-click="vm.sideNavRightStateGo('about')">
                        <md-button><span class="fa fa-info"></span><span style="margin-left: 8px">About katGUI</span></md-button>
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content class="menu-item-divider" layout="row" layout-align="start center">
                    </md-item-content>
                </md-item>
                <md-item ng-controller="ConfigCtrl as cfg" >
                    <md-subheader >Configuration Shortcuts</md-subheader >
                    <md-item-content class="menu-item config-checkbox-shortcut" layout="row" layout-align="start center">
                      <md-checkbox class="md-primary checkbox" ng-model="$root.showAlarms"
                             ng-change="cfg.saveToLocalStorage('showAlarmsNotify', $root.showAlarms)">Show Alarm Notifications
                      </md-checkbox>
                    </md-item-content>
                    <md-item-content class="menu-item config-checkbox-shortcut" layout="row" layout-align="start center">
                      <md-checkbox class="md-primary alarms-tools-checkbox" ng-model="$root.showLargeAlarms"
                             ng-change="cfg.saveToLocalStorage('showLargeAlarms', $root.showLargeAlarms)">Show Detailed Alarm Notifications
                </md-checkbox>
                    </md-item-content>
                <md-item-content class="menu-item config-checkbox-shortcut" layout="row" layout-align="start center">
                <md-checkbox class="md-primary alarms-tools-checkbox" ng-model="$root.disableAlarmSounds"
                             ng-change="cfg.saveToLocalStorage('disableAlarmSounds', $root.disableAlarmSounds)">Disable Alarm Sounds
                </md-checkbox>
                </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content class="menu-item-divider" layout="row" layout-align="start center">
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content class="menu-item" layout="row" layout-align="start center" ng-click="$root.logout()">
                        <md-button><span class="fa"></span><span>Logout</span></md-button>
                    </md-item-content>

                </md-item>

            </md-list>
        </md-content>
    </md-sidenav>

    <div layout="column" flex>
        <md-toolbar id="main-top-toolbar" ng-if="$root.loggedIn" ng-show="vm.showNavbar" class="md-whiteframe-z3" md-theme-watch="true" style="padding: 0; max-height: 56px; min-height: 56px; overflow: hidden;"
                    ng-class="{'slide-in-vertically-navbar': $root.loggedIn && !vm.showNavbar, 'connection-lost-bg-bright': !$root.connectedToMonitor}" >
            <div class="md-toolbar-tools" layout="row" style="padding: 0; max-height: 56px; min-height: 56px; overflow: hidden;">
                <md-button class="mainbar-navbar-button" ng-click="vm.toggleLeftSidenav()">
                    <span class="fa fa-navicon"></span>
                </md-button>

                <span flex style="font-size: 30px; cursor: pointer;" title="Click to Navigate to Parent Display" ng-click="vm.navigateToParentState()">{{$root.currentStateTitle()}}</span>
                <div layout="row" layout-align="center center" style="position: absolute; top: 0; left: 0; right: 0; pointer-events: none">
                    <div ng-show="$root.localSiderealTime && showLST" title="Local Sidereal Time">
                        <span style="font-size: 32px;">{{$root.localSiderealTime}}</span><span class="toolbar-time-span" style="font-size: 12px; margin-right: 8px;"> LST</span>
                    </div>
                    <div ng-if="$root.utcTime && showLocalAndSAST">
                        <span class="toolbar-time-span">{{$root.utcTime}}</span><span class="toolbar-time-span" style="font-size: 12px;"> UTC</span><br/>
                        <span class="toolbar-time-span">{{$root.localTime}}</span><span class="toolbar-time-span" style="font-size: 12px;"> local</span>
                    </div>
                </div>

                <div layout="column" layout-align="start center" style="margin-right: 8px">
                    <md-menu style="padding: 0;">
                        <md-button style="margin: 0; text-transform: none; font-size: 18px" ng-click="$mdMenu.open($event)">
                            <span>{{$root.currentUser.email}}</span><i style="font-size: 12px"> ({{$root.rolesMap[$root.currentUser.req_role]}})</i>
                            <span style="font-size: 14px" class="fa fa-caret-down"></span>
                        </md-button>
                        <md-menu-content width="3" style="padding: 8px; max-height: 800px">
                            <md-menu-item>
                                <label style="margin-top: 12px">Login As...</label>
                            </md-menu-item>
                            <md-item>
                                <md-item-content class="menu-item-divider" layout="row" layout-align="start center">
                                </md-item-content>
                            </md-item>
                            <md-menu-item ng-repeat="role in $root.currentUser.roles | filter:vm.checkAllowedRole track by $index">
                                <md-button ng-click="vm.loginAs(role)">{{$root.rolesMap[role]}}</md-button>
                            </md-menu-item>
                            <md-item>
                                <md-item-content class="menu-item-divider" layout="row" layout-align="start center">
                                </md-item-content>
                            </md-item>
                            <md-menu-item>
                                <md-button ng-click="$root.logout()">Logout</md-button>
                            </md-menu-item>
                        </md-menu-content>
                    </md-menu>

                    <span style="font-size: 14px;">
                        LO: {{$root.katpool_lo_id.value}}
                        <md-tooltip>Current Lead Operator</md-tooltip>
                    </span>
                </div>

                <md-button class="mainbar-navbar-button" ng-click="$root.stateGo('home')" title="Home">
                    <span class="fa fa-home"></span>
                </md-button>

                <md-button class="mainbar-navbar-button" style="overflow: visible;" ng-click="$root.stateGo('alarms')"
                    title="Alarms">
                    <span class="fa fa-warning"></span>
                    <span title="Warning Alarms" ng-show="newAlarms"
                          class="badge alarm-badge alarm-badge-warn">{{newAlarms = (alarmsData | filter:{priority:'new'} | filter:{severity:'warn'}).length}}</span>
                    <span title="Error Alarms" ng-show="errorAlarms"
                          class="badge alarm-badge alarm-badge-error">{{errorAlarms = (alarmsData | filter:{priority:'new'} | filter:{severity:'error'}).length}}</span>
                    <span title="Critical Alarms" ng-show="critAlarms"
                          class="badge alarm-badge alarm-badge-crit">{{critAlarms = (alarmsData | filter:{priority:'new'} | filter:{severity:'critical'}).length}}</span>
                </md-button>

                <md-button class="mainbar-navbar-button" ng-click="vm.toggleRightSidenav()">
                    <span class="fa fa-user"></span>
                </md-button>
            </div>

        </md-toolbar>
        <md-content id="ui-view-container-div" ui-view flex class="md-content-padding" layout="column" ng-class="{'margin-bottom-25': $root.loggedIn}">
        </md-content>
        <div class="" layout="column" >
            <md-toolbar ng-if="$root.loggedIn" md-theme="{{$root.sys_interlock_state.value === 'NONE'? themePrimary: 'amber'}}" class="main-footer-toolbar md-toolbar-tools-small md-whiteframe-z1" layout="row">
                <div>
                    <span>Interlock State: <b>{{$root.sys_interlock_state.value}}</b></span>
                    <md-tooltip>Current Interlock State</md-tooltip>
                </div>

                <div layout="row" style="margin: auto">
                    <b ng-if="$root.devMode">{{$root.portalUrl}}</b>
                    <span style="margin: 0 4px;">{{$root.systemConfig.version.description}}</span>
                    <span style="margin: 0 4px;">{{$root.systemConfig.version.deployment_date}}</span>
                    <md-tooltip>CAM System Description and Deployment Date</md-tooltip>
                </div>

                <div layout="row" style="position: absolute; right: 0">
                    <div style="padding: 0 4px" ng-show="$root.showDayOfYear && $root.dayOfYear">
                        <span>{{$root.dayOfYear}}<sub>DoY</sub></span>
                        <md-tooltip>Current UTC Day Of Year</md-tooltip>
                    </div>
                    <div style="padding: 0 4px" ng-show="$root.showDate && $root.currentDate">
                        <span>{{$root.currentDate}}<sub>Date</sub></span>
                        <md-tooltip>Current UTC Date</md-tooltip>
                    </div>
                    <div style="padding: 0 4px" ng-show="$root.showJulianDate && $root.julianDay">
                        <span>{{$root.julianDay}}<sub>JD</sub></span>
                        <md-tooltip>Julian Day</md-tooltip>
                    </div>
                </div>

            </md-toolbar>
        </div>
    </div>

</md-content>
<div ng-if="$root.loggedIn" class="unselectable toolbar-collapse-button"
        ng-click="vm.toggleNavbar()" title="Expand or Collapse Toolbar" layout="row">

    <div ng-show="vm.showNavbar" flex layout="row" layout-align="center center">
        <span class="fa" ng-class="{ 'fa-caret-up': vm.showNavbar, 'fa-caret-down': !vm.showNavbar}"></span>
    </div>
</div>

<alarms-notifier ng-if="$root.loggedIn"></alarms-notifier>
<!--this button is for d3 created buttons to be able to easily infer the current theme, but we do not need to display it-->
<md-button  id="btnPrimaryTheme" class="md-primary md-raised" md-theme="{{themePrimaryButtons}}" style="display: none"></md-button>

</body>
</html>
