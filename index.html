<!DOCTYPE html>
<html ng-app="katGui">
<head>
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <link href="bower_components/angular-material/angular-material.css" rel="stylesheet" type="text/css">
    <link href="app/app.less" type="text/css" rel="stylesheet/less">
    <link href="bower_components/angular-dashboard-framework/dist/angular-dashboard-framework.min.css" rel="stylesheet"
          type="text/css">
    <!--<link href="bower_components/angular-gantt/assets/gantt.css" rel="stylesheet" type="text/css">-->
    <link href="bower_components/angular-bootstrap-datetimepicker/src/css/datetimepicker.css" rel="stylesheet"
          type="text/css">

    <link rel="stylesheet" href="bower_components/font-awesome/css/font-awesome.min.css">
    <!-- endbuild -->
</head>

<!-- Place this asynchronous JavaScript just before your </body> tag -->
<!--<script type="text/javascript">-->
<!--(function () {-->
<!--var po = document.createElement('script');-->
<!--po.type = 'text/javascript';-->
<!--po.async = true;-->
<!--po.src = 'https://apis.google.com/js/client:plusone.js';-->
<!--var s = document.getElementsByTagName('script')[0];-->
<!--s.parentNode.insertBefore(po, s);-->
<!--})();-->
<!--</script>-->

<body ng-controller="ApplicationCtrl as vm" md-theme="{{themePrimary}}" md-theme-watch="true" layout="row">

<!-- Livereload script for development only (stripped during dist build) -->
<script src="http://localhost:35729/livereload.js" data-concat="false"></script>
<script src="bower_components/jquery/jquery.js"></script>
<script src="bower_components/jquery-ui/ui/jquery.ui.core.js"></script>
<script src="bower_components/jquery-ui/ui/jquery.ui.widget.js"></script>
<script src="bower_components/jquery-ui/ui/jquery.ui.mouse.js"></script>
<script src="bower_components/jquery-ui/ui/jquery.ui.sortable.js"></script>

<!-- JS from Bower Components -->
<script src="bower_components/less.js/dist/less.min.js" data-concat="false"></script>
<script src="bower_components/bootstrap/dist/js/bootstrap.js"></script>
<script src="bower_components/underscore/underscore.js"></script>
<script src="bower_components/moment/moment.js"></script>
<script src="bower_components/sockjs/sockjs.js"></script>
<script src="bower_components/angular/angular.js"></script>
<script src="bower_components/angular-aria/angular-aria.js"></script>
<script src="bower_components/angular-animate/angular-animate.js"></script>
<script src="bower_components/hammerjs/hammer.js"></script>
<script src="bower_components/angular-material/angular-material.js"></script>
<script src="bower_components/angular-mocks/angular-mocks.js"></script>
<script src="bower_components/angular-ui-router/release/angular-ui-router.js"></script>
<script src="bower_components/angular-resource/angular-resource.js"></script>
<script src="bower_components/angular-bootstrap/ui-bootstrap-tpls.js"></script>
<script src="bower_components/angular-ui-utils/ui-utils.js"></script>
<script src="bower_components/ngstorage/ngStorage.js"></script>
<script src="bower_components/angular-dashboard-framework/dist/angular-dashboard-framework.min.js"></script>
<script src="bower_components/angular-bootstrap-datetimepicker/src/js/datetimepicker.js"></script>
<script src="bower_components/jsjws/jws-3.0.js"></script>
<script src="bower_components/jsjws/ext/json-sans-eval-min.js"></script>
<script src="bower_components/jsrsasign/jsrsasign-4.7.0-all-min.js"></script>
<!--<script src="bower_components/angular-gantt/assets/angular-gantt.js"></script>-->
<!-- Add New Bower Component JS Above -->

<!-- Main App JS -->
<script src="app/app.js"></script>
<script src="app/about/about.js"></script>
<script src="app/config/config.js"></script>
<script src="app/login-form/login-form.js"></script>
<script src="app/landing/landing.js"></script>
<script src="app/weather/weather.js"></script>
<script src="app/video/video.js"></script>
<script src="app/operator-control/operator-control.js"></script>
<script src="app/util/focus-directive.js"></script>
<script src="app/util/editable-directive.js"></script>
<script src="app/services/control-service.js"></script>
<script src="app/services/config-service.js"></script>
<script src="app/services/data-service.js"></script>
<script src="app/services/monitor-service.js"></script>
<script src="app/services/observation-schedule-service.js"></script>
<script src="app/services/receptor-state-service.js"></script>
<script src="app/services/user-service.js"></script>
<script src="app/services/session-service.js"></script>
<script src="app/services/status-service.js"></script>
<script src="app/health/health.js"></script>
<script src="app/health/receptor-status/receptor-status.js"></script>
<script src="app/sensor-graph/sensor-graph.js"></script>
<script src="app/d3/d3-chart-directive.js"></script>
<script src="app/d3/d3-treemap.js"></script>
<script src="app/d3/d3-wind-rose.js"></script>
<script src="app/d3/d3-service.js"></script>
<script src="app/admin/admin.js"></script>
<script src="app/util/util.js"></script>
<script src="app/alarms/alarms.js"></script>
<script src="app/alarms/alarms-notify.js"></script>
<script src="app/widgets/navigation/navigation-widget.js"></script>
<script src="app/widgets/dashboard-structures.js"></script>
<script src="app/scheduler/scheduler-home.js"></script>
<script src="app/scheduler/schedule-block-drafts/schedule-block-drafts.js"></script>
<script src="app/scheduler/subarrays-draft-assignment/subarrays-draft-assignment.js"></script>
<script src="app/scheduler/subarray-resources/subarray-resources.js"></script>
<script src="app/scheduler/observations/observations-detail.js"></script>
<script src="app/scheduler/observations/observations-overview.js"></script>
<!--<script src="app/widgets/gantt/gantt-widget.js"></script>-->
<!-- Add New Component JS Above -->

<!--dont use md-whiteframe class because it leaves black artifacts on sidenav-->
<md-content layout="row" layout-fill>
    <md-sidenav ng-if="loggedIn" class="md-sidenav-left" md-component-id="left-sidenav" layout="column" style="box-shadow: 0px 8px 17px 1px rgba(0, 0, 0, 0.2);">
        <md-toolbar md-theme="{{themeSecondary}}" class="md-whiteframe-z1" md-theme-watch="true">
            <h1 class="md-toolbar-tools side-nav-title">katGUI</h1>
        </md-toolbar>
        <md-content class="md-content-padding" style="margin-top: 16px;" md-theme="default">
            <md-list>
                <md-item>
                    <md-item-content class="menu-item" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('home')">
                        <span class="fa fa-home"></span>
                        <button>Home</button>
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content style="border-bottom: 1px solid #e5e5e5; padding-bottom: 8px;" class="menu-item" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('alarms')">
                        <span class="fa fa-warning"></span>
                        <button>Alarms</button>
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content style="margin-top: 8px; margin-bottom: 8px; padding-bottom: 8px; border-bottom: 1px solid #e5e5e5;" layout="column">
                        <div class="menu-item" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('health')">
                            <span class="fa fa-heart"></span>
                            <button>Health & State</button>
                        </div>
                        <div class="menu-item menu-item-indented" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('receptorStatus')">
                            <span class="fa fa-th"></span>
                            <button>Receptor Status</button>
                        </div>
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content style="border-bottom: 1px solid #e5e5e5; padding-bottom: 8px;" ng-click="vm.sideNavStateGo('operatorControl')">
                        <div class="menu-item" layout="row" layout-align="start center">
                            <span class="fa fa-cogs"></span>
                            <button>Operator Control</button>
                        </div>
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content layout="column" style="margin-top: 8px; margin-bottom: 8px; padding-bottom: 8px; border-bottom: 1px solid #e5e5e5;">
                        <div class="menu-item" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('scheduler')">
                            <span class="fa fa-list"></span>
                            <button>Scheduler Management</button>
                        </div>
                        <div class="menu-item menu-item-indented" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('scheduler.drafts')">
                            <span class="fa fa-pencil"></span>
                            <button>Schedule Block Drafts</button>
                        </div>
                        <div class="menu-item menu-item-indented" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('scheduler.subarrays')">
                            <span class="fa fa-asterisk"></span>
                            <button>Sub-Arrays</button>
                        </div>
                        <div class="menu-item menu-item-indented" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('scheduler.resources')">
                            <span class="fa fa-sitemap"></span>
                            <button>Sub-Array Resources</button>
                        </div>
                        <div class="menu-item menu-item-indented" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('scheduler.observations')">
                            <span class="fa fa-binoculars"></span>
                            <button>Observations Overview</button>
                        </div>
                        <div class="menu-item menu-item-indented" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('scheduler.execute')">
                            <span class="fa fa-tasks"></span>
                            <button>Scheduler</button>
                        </div>
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content class="menu-item" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('sensorGraph')">
                        <span class="fa fa-area-chart"></span>
                        <button>Sensor Graphs</button>
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content class="menu-item" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('video')">
                        <span class="fa fa-video-camera"></span>
                        <button>Video</button>
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content class="menu-item" layout="row" layout-align="start center" ng-click="vm.sideNavStateGo('about')">
                        <span class="fa fa-info"></span>
                        <button>About katGUI</button>
                    </md-item-content>
                </md-item>
            </md-list>
        </md-content>
    </md-sidenav>

    <md-sidenav ng-if="loggedIn" class="md-sidenav-right" md-component-id="right-sidenav" layout="column" style="box-shadow: 0px 8px 17px 1px rgba(0, 0, 0, 0.2);">
        <md-toolbar md-theme="{{themeSecondary}}" class="md-whiteframe-z1" md-theme-watch="true">
            <h1 class="md-toolbar-tools side-nav-title">User Navigation</h1>
        </md-toolbar>
        <md-content class="md-content-padding" style="margin-top: 16px;" md-theme="default">
            <md-list>
                <md-item>
                    <md-item-content class="menu-item" layout="row" layout-align="start center" ng-click="vm.sideNavRightStateGo('admin')">
                        <span class="fa fa-users"></span>
                        <button>User Admin</button>
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content class="menu-item" layout="row" layout-align="start center" ng-click="vm.sideNavRightStateGo('config')">
                        <span class="fa fa-gear"></span>
                        <button>Configure katGUI</button>
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content class="menu-item-divider" layout="row" layout-align="start center">
                    </md-item-content>
                </md-item>
                <md-item>
                    <md-item-content class="menu-item" layout="row" layout-align="start center" ng-click="vm.logout()">
                        <span class="fa"></span>
                        <button>Logout</button>
                    </md-item-content>
                </md-item>
            </md-list>
        </md-content>
    </md-sidenav>

    <div layout="column" flex>
        <md-toolbar ng-if="loggedIn" ng-show="vm.showNavbar" ng-class="{'slide-in-vertically-navbar': loggedIn}" class="md-whiteframe-z1" md-theme-watch="true"
                    ng-mouseenter="showJulianDate = true" ng-mouseleave="showJulianDate = false">
            <div class="md-toolbar-tools" layout="row" style="padding: 0;  max-height: 56px;">

                <md-button aria-label="Left Navbar" class="button-toolbar-flat-icon"
                           style="margin-left: 0px; padding: 0px;"
                           ng-click="vm.toggleLeftSidenav()">
                    <span class="fa fa-navicon"></span>
                </md-button>

                <span style="font-size: 30px; cursor: pointer;" ng-click="vm.navigateToParentState()">{{vm.currentStateUpperCase()}}</span>

                <!--<div class="btn-group"-->
                <!--ng-class="{open: vm.operatorControlHover || vm.operatorControlMenuHover}" layout="row">-->

                <!---->

                <!--<md-button style="height: 40px;" md-theme="{{themePrimaryButtons}}" md-theme-watch="true" class=""-->
                <!--aria-label="Operator Control"-->
                <!--ng-mouseenter="vm.operatorControlHover = true"-->
                <!--ng-mouseleave="vm.operatorControlHover = false"-->
                <!--ng-click="vm.operatorControlHover = false; vm.operatorControlMenuHover = false; vm.stateGo('operatorControl')">-->
                <!--Operator Control-->
                <!--</md-button>-->

                <!--<md-content flex style="margin: -7px -1px 0;" class="dropdown-menu"-->
                <!--ng-mouseenter="vm.operatorControlMenuHover = true"-->
                <!--ng-mouseleave="vm.operatorControlMenuHover = false"-->
                <!--role="menu">-->
                <!--<div style="color: rgba(0,0,0,0.73)" layout="column">-->
                <!--<md-button ng-click="vm.inhibitAll()" aria-label="Inhibit All">Inhibit All</md-button>-->
                <!--<md-button ng-click="vm.stowAll()" aria-label="Stow All">Stow All</md-button>-->
                <!--<md-button ng-click="vm.stopAll()" aria-label="Stop All">Stop All</md-button>-->
                <!--<md-button ng-click="vm.resumeOperations()" aria-label="Resume Operations">Resume Operations</md-button>-->
                <!--<md-button disabled ng-click="vm.shutdownComputing()" aria-label="Shutdown Computing">Shutdown Computing</md-button>-->
                <!--</div>-->
                <!--</md-content>-->

                <!--</div>-->

                <span flex></span>

                <div ng-if="vm.julianDay" ng-show="showJulianDate">
                    <span style="font-size: 32px;">{{vm.julianDay}}</span><span class="toolbar-time-span" style="font-size: 12px; margin-right: 8px;"> JD</span>
                    <md-tooltip>Julian Day</md-tooltip>
                </div>
                <div ng-if="vm.localSiderealTime">
                    <span style="font-size: 32px;">{{vm.localSiderealTime}}</span><span class="toolbar-time-span" style="font-size: 12px;margin-right: 8px;"> LST</span>
                    <md-tooltip>Local Sidereal Time</md-tooltip>
                </div>
                <div ng-if="vm.utcTime">
                    <span class="toolbar-time-span">{{vm.utcTime}}</span><span class="toolbar-time-span" style="font-size: 12px;"> UTC</span><br/>
                    <span class="toolbar-time-span">{{vm.localTime}}</span><span class="toolbar-time-span" style="font-size: 12px;"> SAST</span>
                </div>

                <md-button aria-label="Home" class="button-toolbar-flat-icon" style="margin: 2px;"
                           ng-click="vm.stateGo('home')"><span class="fa fa-home"></span>
                </md-button>

                <div class="alarms-warning-container" style="margin: 2px;">
                    <md-button aria-label="Alarms" class="button-toolbar-flat-icon"
                               ng-click="vm.stateGo('alarms')">
                        <span class="fa fa-warning"></span>
                    </md-button>
                    <span title="Warning Alarms"
                          class="badge alarm-badge alarm-badge-warn">{{(alarmsData | filter:{priority:'new'} | filter:{severity:'warn'}).length}}</span>
                    <span title="Error Alarms"
                        class="badge alarm-badge alarm-badge-error">{{(alarmsData | filter:{priority:'new'} | filter:{severity:'error'}).length}}</span>
                    <span title="Critical Alarms"
                        class="badge alarm-badge alarm-badge-crit">{{(alarmsData | filter:{priority:'new'} | filter:{severity:'critical'}).length}}</span></span>
                </div>

                <md-button aria-label="Right Navbar" class="button-toolbar-flat-icon" ng-click="vm.toggleRightSidenav()" style="margin: 2px;">
                    <span class="fa fa-user"></span>
                </md-button>
            </div>

        </md-toolbar>
        <md-content id="ui-view-container-div" ui-view flex class="md-content-padding" layout="column">
        </md-content>
    </div>

</md-content>
<button ng-if="loggedIn" class="unselectable toolbar-collapse-button" ng-class="{'toolbar-collapse-button-grey': !vm.showNavbar}"
        ng-click="vm.showNavbar = !vm.showNavbar">
    <i class="fa"
       ng-class="{ 'fa-caret-up': vm.showNavbar,  'fa-caret-down': !vm.showNavbar}"></i>
</button>

<div ng-if="loggedIn" alarms-notifier></div>

</body>
</html>
